### X ~ Y 범위의 포인트를 갖는 레벨별 랭킹 구하기

```sql
select ut2.* 
from (
	select ut.user_id, ut.nick_name, ut.character_image_type, ut.point, rank() over (order by cast(ut.lvl as UNSIGNED) DESC) as ranks
	 from (
		select *,
		(CASE 
			WHEN point <= 1000 THEN 1
			WHEN point <= 10000 AND MOD(point, 1000) >=1 THEN left(point, 1) + 1
			WHEN point <= 10000 AND MOD(point, 1000) < 1 THEN left(point, 1)
			WHEN point > 10000 AND MOD(point, 1000) >=1 THEN left(point, 2) + 1
			ELSE left(point, 2)
		END) as lvl
		from user_t 
		order by point DESC
	) as ut
	where ut.class_info_id = 1
) as ut2 where ut2.user_id = 16
```

---

```sql
SELECT
  user_t.user_id,
	user_t.point, 
	point_t.lvl, 
	rank() over (order by point_t.lvl DESC ) as ranks
FROM
  user_t
inner JOIN
  point_t ON user_t.point BETWEEN point_t.min_point AND point_t.max_point
order by point DESC;
```

아래의 포인트 테이블이 존재할 경우를 가정한다.
```
pk min, max, level
1	1	1000	1
2	1001	2000	2
3	2001	3000	3
4	3001	4000	4
5	4001	5000	5
6	5001	6000	6
7	6001	7000	7
8	7001	8000	8
9	8001	9000	9
10	9001	10000	10
11	10001	11000	11
12	11001	12000	12
13	12001	13000	13
14	13001	14000	14
15	14001	15000	15
16	15001	16000	16
17	16001	17000	17
18	17001	18000	18
19	18001	19000	19
20	19001	20000	20
21	20001	21000	21
22	21001	22000	22
23	22001	23000	23
24	23001	24000	24
25	24001	25000	25
26	25001	26000	26
27	26001	27000	27
28	27001	28000	28
29	28001	29000	29
30	29001	30000	30
31	30001	31000	31
32	31001	32000	32
33	32001	33000	33
34	33001	34000	34
35	34001	35000	35
36	35001	36000	36
37	36001	37000	37
38	37001	38000	38
39	38001	39000	39
40	39001	40000	40
41	40001	41000	41
42	41001	42000	42
43	42001	43000	43
44	43001	44000	44
45	44001	45000	45
46	45001	46000	46
47	46001	47000	47
48	47001	48000	48
49	48001	49000	49
50	49001	50000	50
51	50001	51000	51
52	51001	52000	52
53	52001	53000	53
54	53001	54000	54
55	54001	55000	55
56	55001	56000	56
57	56001	57000	57
58	57001	58000	58
59	58001	59000	59
60	59001	60000	60
61	60001	61000	61
62	61001	62000	62
63	62001	63000	63
64	63001	64000	64
65	64001	65000	65
66	65001	66000	66
67	66001	67000	67
68	67001	68000	68
69	68001	69000	69
70	69001	70000	70
```
